<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Editar Producto</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body class="bg-light">
    <div class="container py-4">
        <h2>Editar Producto</h2>

        <form id="form">
            <input class="form-control mb-3" id="nombre" required>
            <input type="number" class="form-control mb-3" id="precio" required>

            <button class="btn btn-primary">Actualizar</button>
            <a href="index.html" class="btn btn-secondary">Volver</a>
        </form>
    </div>

    <script>
        const id = new URLSearchParams(window.location.search).get("id");

        async function cargar() {
            const res = await fetch(`/editar/${id}`);
            const p = await res.json();

            document.getElementById("nombre").value = p.nombre;
            document.getElementById("precio").value = p.precio;
        }

        document.getElementById("form").addEventListener("submit", async e => {
            e.preventDefault();

            const nombre = document.getElementById("nombre").value;
            const precio = document.getElementById("precio").value;

            await fetch(`/editar/${id}`, {
                method: "PUT",
                headers: {"Content-Type": "application/json"},
                body: JSON.stringify({ nombre, precio })
            });

            window.location.href = "index.html";
        });

        cargar();
    </script>
</body>
</html>
